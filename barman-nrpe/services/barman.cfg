define service{
    service_description    Barman $KEY$ SSH connection
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_ssh
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

define service{
    service_description    Barman $KEY$ POstgreSQL connection
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_postgresql
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

define service{
    service_description    Barman $KEY$ backups available
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_backups_available
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

define service{
    service_description    Barman $KEY$ last backup age
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_last_backup_age
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

define service{
    service_description    Barman $KEY$ last WAL age
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_last_wal_age
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

define service{
    service_description    Barman $KEY$ failed backups
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_failed_backups
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

define service{
    service_description    Barman $KEY$ missing WALs
    use            generic-service
    register       0
    host_name      barman-nrpe
    check_command  check_nrpe!check_barman_$KEY$_missing_wals
    notification_period   workhours

    duplicate_foreach    _pg_servers
}

